function t(t){return t.split("-")[1]}function e(t){return"y"===t?"height":"width"}function n(t){return t.split("-")[0]}function o(t){return["top","bottom"].includes(n(t))?"x":"y"}function r(r,i,l){let{reference:s,floating:a}=r;const c=s.x+s.width/2-a.width/2,f=s.y+s.height/2-a.height/2,m=o(i),u=e(m),g=s[u]/2-a[u]/2,p="x"===m;let d;switch(n(i)){case"top":d={x:c,y:s.y-a.height};break;case"bottom":d={x:c,y:s.y+s.height};break;case"right":d={x:s.x+s.width,y:f};break;case"left":d={x:s.x-a.width,y:f};break;default:d={x:s.x,y:s.y}}switch(t(i)){case"start":d[m]-=g*(l&&p?-1:1);break;case"end":d[m]+=g*(l&&p?-1:1)}return d}const i=(t,e,n)=>{const{placement:o="bottom",strategy:i="absolute",middleware:l=[],platform:s}=n,a=l.filter(Boolean),c=null==s.isRTL?void 0:s.isRTL(e);let f=s.getElementRects({reference:t,floating:e,strategy:i}),{x:m,y:u}=r(f,o,c),g=o,p={},d=0;for(let n=0;n<a.length;n++){const{name:l,fn:h}=a[n],{x:x,y:y,data:v,reset:b}=h({x:m,y:u,initialPlacement:o,placement:g,strategy:i,middlewareData:p,rects:f,platform:s,elements:{reference:t,floating:e}});m=null!=x?x:m,u=null!=y?y:u,p={...p,[l]:{...p[l],...v}},b&&d<=50&&(d++,"object"==typeof b&&(b.placement&&(g=b.placement),b.rects&&(f=!0===b.rects?s.getElementRects({reference:t,floating:e,strategy:i}):b.rects),({x:m,y:u}=r(f,g,c))),n=-1)}return{x:m,y:u,placement:g,strategy:i,middlewareData:p}};function l(t,e){return"function"==typeof t?t(e):t}function s(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}function a(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function c(t,e){var n;void 0===e&&(e={});const{x:o,y:r,platform:i,rects:c,elements:f,strategy:m}=t,{boundary:u="clippingAncestors",rootBoundary:g="viewport",elementContext:p="floating",altBoundary:d=!1,padding:h=0}=l(e,t),x=s(h),y=f[d?"floating"===p?"reference":"floating":p],v=a(i.getClippingRect({element:null==(n=null==i.isElement?void 0:i.isElement(y))||n?y:y.contextElement||(null==i.getDocumentElement?void 0:i.getDocumentElement(f.floating)),boundary:u,rootBoundary:g,strategy:m})),b="floating"===p?{...c.floating,x:o,y:r}:c.reference,w=null==i.getOffsetParent?void 0:i.getOffsetParent(f.floating),A=null!=i.isElement&&i.isElement(w)&&(null==i.getScale?void 0:i.getScale(w))||{x:1,y:1},R=a(i.convertOffsetParentRelativeRectToViewportRelativeRect?i.convertOffsetParentRelativeRectToViewportRelativeRect({rect:b,offsetParent:w,strategy:m}):b);return{top:(v.top-R.top+x.top)/A.y,bottom:(R.bottom-v.bottom+x.bottom)/A.y,left:(v.left-R.left+x.left)/A.x,right:(R.right-v.right+x.right)/A.x}}const f=Math.min,m=Math.max;function u(t,e,n){return m(t,f(e,n))}const g=n=>({name:"arrow",options:n,fn(r){const{x:i,y:a,placement:c,rects:m,platform:g,elements:p}=r,{element:d,padding:h=0}=l(n,r)||{};if(null==d)return{};const x=s(h),y={x:i,y:a},v=o(c),b=e(v),w=g.getDimensions(d),A="y"===v,R=A?"top":"left",P=A?"bottom":"right",E=A?"clientHeight":"clientWidth",T=m.reference[b]+m.reference[v]-y[v]-m.floating[b],D=y[v]-m.reference[v],L=null==g.getOffsetParent?void 0:g.getOffsetParent(d);let k=L?L[E]:0;k&&null!=g.isElement&&g.isElement(L)||(k=p.floating[E]||m.floating[b]);const O=T/2-D/2,B=k/2-w[b]/2-1,C=f(x[R],B),H=f(x[P],B),S=C,F=k-w[b]-H,M=k/2-w[b]/2+O,V=u(S,M,F),W=null!=t(c)&&M!=V&&m.reference[b]/2-(M<S?C:H)-w[b]/2<0?M<S?S-M:F-M:0;return{[v]:y[v]-W,data:{[v]:V,centerOffset:M-V+W}}}}),p=["top","right","bottom","left"],d=p.reduce(((t,e)=>t.concat(e,e+"-start",e+"-end")),[]),h={left:"right",right:"left",bottom:"top",top:"bottom"};function x(t){return t.replace(/left|right|bottom|top/g,(t=>h[t]))}function y(n,r,i){void 0===i&&(i=!1);const l=t(n),s=o(n),a=e(s);let c="x"===s?l===(i?"end":"start")?"right":"left":"start"===l?"bottom":"top";return r.reference[a]>r.floating[a]&&(c=x(c)),{main:c,cross:x(c)}}const v={start:"end",end:"start"};function b(t){return t.replace(/start|end/g,(t=>v[t]))}const w=function(e){return void 0===e&&(e={}),{name:"autoPlacement",options:e,fn(o){var r,i,s;const{rects:a,middlewareData:f,placement:m,platform:u,elements:g}=o,{crossAxis:p=!1,alignment:h,allowedPlacements:x=d,autoAlignment:v=!0,...w}=l(e,o),A=void 0!==h||x===d?function(e,o,r){return(e?[...r.filter((n=>t(n)===e)),...r.filter((n=>t(n)!==e))]:r.filter((t=>n(t)===t))).filter((n=>!e||t(n)===e||!!o&&b(n)!==n))}(h||null,v,x):x,R=c(o,w),P=(null==(r=f.autoPlacement)?void 0:r.index)||0,E=A[P];if(null==E)return{};const{main:T,cross:D}=y(E,a,null==u.isRTL?void 0:u.isRTL(g.floating));if(m!==E)return{reset:{placement:A[0]}};const L=[R[n(E)],R[T],R[D]],k=[...(null==(i=f.autoPlacement)?void 0:i.overflows)||[],{placement:E,overflows:L}],O=A[P+1];if(O)return{data:{index:P+1,overflows:k},reset:{placement:O}};const B=k.map((e=>{const n=t(e.placement);return[e.placement,n&&p?e.overflows.slice(0,2).reduce(((t,e)=>t+e),0):e.overflows[0],e.overflows]})).sort(((t,e)=>t[1]-e[1])),C=(null==(s=B.filter((e=>e[2].slice(0,t(e[0])?2:3).every((t=>t<=0))))[0])?void 0:s[0])||B[0][0];return C!==m?{data:{index:P+1,overflows:k},reset:{placement:C}}:{}}}};const A=function(e){return void 0===e&&(e={}),{name:"flip",options:e,fn(o){var r;const{placement:i,middlewareData:s,rects:a,initialPlacement:f,platform:m,elements:u}=o,{mainAxis:g=!0,crossAxis:p=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:w=!0,...A}=l(e,o),R=n(i),P=n(f)===f,E=null==m.isRTL?void 0:m.isRTL(u.floating),T=d||(P||!w?[x(f)]:function(t){const e=x(t);return[b(t),e,b(e)]}(f));d||"none"===v||T.push(...function(e,o,r,i){const l=t(e);let s=function(t,e,n){const o=["left","right"],r=["right","left"],i=["top","bottom"],l=["bottom","top"];switch(t){case"top":case"bottom":return n?e?r:o:e?o:r;case"left":case"right":return e?i:l;default:return[]}}(n(e),"start"===r,i);return l&&(s=s.map((t=>t+"-"+l)),o&&(s=s.concat(s.map(b)))),s}(f,w,v,E));const D=[f,...T],L=c(o,A),k=[];let O=(null==(r=s.flip)?void 0:r.overflows)||[];if(g&&k.push(L[R]),p){const{main:t,cross:e}=y(i,a,E);k.push(L[t],L[e])}if(O=[...O,{placement:i,overflows:k}],!k.every((t=>t<=0))){var B,C;const t=((null==(B=s.flip)?void 0:B.index)||0)+1,e=D[t];if(e)return{data:{index:t,overflows:O},reset:{placement:e}};let n=null==(C=O.filter((t=>t.overflows[0]<=0)).sort(((t,e)=>t.overflows[1]-e.overflows[1]))[0])?void 0:C.placement;if(!n)switch(h){case"bestFit":{var H;const t=null==(H=O.map((t=>[t.placement,t.overflows.filter((t=>t>0)).reduce(((t,e)=>t+e),0)])).sort(((t,e)=>t[1]-e[1]))[0])?void 0:H[0];t&&(n=t);break}case"initialPlacement":n=f}if(i!==n)return{reset:{placement:n}}}return{}}}};function R(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function P(t){return p.some((e=>t[e]>=0))}const E=function(t){return void 0===t&&(t={}),{name:"hide",options:t,fn(e){const{rects:n}=e,{strategy:o="referenceHidden",...r}=l(t,e);switch(o){case"referenceHidden":{const t=R(c(e,{...r,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:t,referenceHidden:P(t)}}}case"escaped":{const t=R(c(e,{...r,altBoundary:!0}),n.floating);return{data:{escapedOffsets:t,escaped:P(t)}}}default:return{}}}}};function T(t){const e=f(...t.map((t=>t.left))),n=f(...t.map((t=>t.top)));return{x:e,y:n,width:m(...t.map((t=>t.right)))-e,height:m(...t.map((t=>t.bottom)))-n}}const D=function(t){return void 0===t&&(t={}),{name:"inline",options:t,fn(e){const{placement:r,elements:i,rects:c,platform:u,strategy:g}=e,{padding:p=2,x:d,y:h}=l(t,e),x=Array.from((null==u.getClientRects?void 0:u.getClientRects(i.reference))||[]),y=function(t){const e=t.slice().sort(((t,e)=>t.y-e.y)),n=[];let o=null;for(let t=0;t<e.length;t++){const r=e[t];!o||r.y-o.y>o.height/2?n.push([r]):n[n.length-1].push(r),o=r}return n.map((t=>a(T(t))))}(x),v=a(T(x)),b=s(p);const w=u.getElementRects({reference:{getBoundingClientRect:function(){if(2===y.length&&y[0].left>y[1].right&&null!=d&&null!=h)return y.find((t=>d>t.left-b.left&&d<t.right+b.right&&h>t.top-b.top&&h<t.bottom+b.bottom))||v;if(y.length>=2){if("x"===o(r)){const t=y[0],e=y[y.length-1],o="top"===n(r),i=t.top,l=e.bottom,s=o?t.left:e.left,a=o?t.right:e.right;return{top:i,bottom:l,left:s,right:a,width:a-s,height:l-i,x:s,y:i}}const t="left"===n(r),e=m(...y.map((t=>t.right))),i=f(...y.map((t=>t.left))),l=y.filter((n=>t?n.left===i:n.right===e)),s=l[0].top,a=l[l.length-1].bottom;return{top:s,bottom:a,left:i,right:e,width:e-i,height:a-s,x:i,y:s}}return v}},floating:i.floating,strategy:g});return c.reference.x!==w.reference.x||c.reference.y!==w.reference.y||c.reference.width!==w.reference.width||c.reference.height!==w.reference.height?{reset:{rects:w}}:{}}}};const L=function(e){return void 0===e&&(e=0),{name:"offset",options:e,fn(r){const{x:i,y:s}=r,a=function(e,r){const{placement:i,platform:s,elements:a}=e,c=null==s.isRTL?void 0:s.isRTL(a.floating),f=n(i),m=t(i),u="x"===o(i),g=["left","top"].includes(f)?-1:1,p=c&&u?-1:1,d=l(r,e);let{mainAxis:h,crossAxis:x,alignmentAxis:y}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return m&&"number"==typeof y&&(x="end"===m?-1*y:y),u?{x:x*p,y:h*g}:{x:h*g,y:x*p}}(r,e);return{x:i+a.x,y:s+a.y,data:a}}}};function k(t){return"x"===t?"y":"x"}const O=function(t){return void 0===t&&(t={}),{name:"shift",options:t,fn(e){const{x:r,y:i,placement:s}=e,{mainAxis:a=!0,crossAxis:f=!1,limiter:m={fn:t=>{let{x:e,y:n}=t;return{x:e,y:n}}},...g}=l(t,e),p={x:r,y:i},d=c(e,g),h=o(n(s)),x=k(h);let y=p[h],v=p[x];if(a){const t="y"===h?"bottom":"right";y=u(y+d["y"===h?"top":"left"],y,y-d[t])}if(f){const t="y"===x?"bottom":"right";v=u(v+d["y"===x?"top":"left"],v,v-d[t])}const b=m.fn({...e,[h]:y,[x]:v});return{...b,data:{x:b.x-r,y:b.y-i}}}}},B=function(t){return void 0===t&&(t={}),{options:t,fn(e){const{x:r,y:i,placement:s,rects:a,middlewareData:c}=e,{offset:f=0,mainAxis:m=!0,crossAxis:u=!0}=l(t,e),g={x:r,y:i},p=o(s),d=k(p);let h=g[p],x=g[d];const y=l(f,e),v="number"==typeof y?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(m){const t="y"===p?"height":"width",e=a.reference[p]-a.floating[t]+v.mainAxis,n=a.reference[p]+a.reference[t]-v.mainAxis;h<e?h=e:h>n&&(h=n)}if(u){var b,w;const t="y"===p?"width":"height",e=["top","left"].includes(n(s)),o=a.reference[d]-a.floating[t]+(e&&(null==(b=c.offset)?void 0:b[d])||0)+(e?0:v.crossAxis),r=a.reference[d]+a.reference[t]+(e?0:(null==(w=c.offset)?void 0:w[d])||0)-(e?v.crossAxis:0);x<o?x=o:x>r&&(x=r)}return{[p]:h,[d]:x}}}},C=function(e){return void 0===e&&(e={}),{name:"size",options:e,fn(r){const{placement:i,rects:s,platform:a,elements:u}=r,{apply:g=(()=>{}),...p}=l(e,r),d=c(r,p),h=n(i),x=t(i),y="x"===o(i),{width:v,height:b}=s.floating;let w,A;"top"===h||"bottom"===h?(w=h,A=x===(null!=a.isRTL&&a.isRTL(u.floating)?"start":"end")?"left":"right"):(A=h,w="end"===x?"top":"bottom");const R=b-d[w],P=v-d[A],E=!r.middlewareData.shift;let T=R,D=P;if(y){const t=v-d.left-d.right;D=x||E?f(P,t):t}else{const t=b-d.top-d.bottom;T=x||E?f(R,t):t}if(E&&!x){const t=m(d.left,0),e=m(d.right,0),n=m(d.top,0),o=m(d.bottom,0);y?D=v-2*(0!==t||0!==e?t+e:m(d.left,d.right)):T=b-2*(0!==n||0!==o?n+o:m(d.top,d.bottom))}g({...r,availableWidth:D,availableHeight:T});const L=a.getDimensions(u.floating);return v!==L.width||b!==L.height?{reset:{rects:!0}}:{}}}};export{g as arrow,w as autoPlacement,i as computePosition,c as detectOverflow,A as flip,E as hide,D as inline,B as limitShift,L as offset,a as rectToClientRect,O as shift,C as size};
